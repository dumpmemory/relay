import{d as j,r as w,k as H,l as J,o as K,m as O,p as i,w as e,i as x,f as o,e as n,b as l,c as u,q as P,t as m,n as h,v as c,x as Q,y as X,z as C,F as Y,A as Z,u as ee,g as s,_ as oe}from"./index-CYqpppIH.js";import{u as ne}from"./useWebSocket-D04I9c-G.js";const te={class:"logo"},se={key:0,class:"logo-text"},ae={key:1,class:"logo-text"},le={key:0,class:"version-info"},ce={key:0,class:"version-text"},de={class:"header-right"},ie={class:"user-dropdown"},ue=j({__name:"Layout",setup(re){const b=ee(),z=J(),a=w(!1),y=w(!1),r=w(null),{isConnected:_,dataActive:g}=ne(),A=[{path:"/",icon:"Grid",label:"转发规则"},{path:"/monitor",icon:"Monitor",label:"实时监控"},{path:"/settings",icon:"Setting",label:"系统设置"}],E=H(()=>z.path),v=()=>{y.value=window.innerWidth<768,y.value&&(a.value=!0)},L=async()=>{await x.logout(),Z(),b.push("/login")},R=async()=>{const f=await x.version();f.code===0&&(r.value=f.data)};return K(()=>{v(),window.addEventListener("resize",v),R()}),O(()=>{window.removeEventListener("resize",v)}),(f,t)=>{const p=o("el-icon"),V=o("el-menu-item"),B=o("el-menu"),D=o("el-tooltip"),F=o("el-aside"),M=o("Fold"),N=o("Expand"),S=o("User"),U=o("ArrowDown"),I=o("el-dropdown-item"),T=o("el-dropdown-menu"),W=o("el-dropdown"),q=o("el-header"),G=o("router-view"),$=o("el-main"),k=o("el-container");return s(),i(k,{class:"layout-container"},{default:e(()=>[n(F,{width:a.value?"64px":"200px",class:"layout-aside"},{default:e(()=>[l("div",te,[a.value?(s(),u("span",ae,[t[2]||(t[2]=m(" R ",-1)),l("span",{class:h(["status-dot",{connected:c(_),disconnected:!c(_),"data-active":c(g)}])},null,2)])):(s(),u("span",se,[t[1]||(t[1]=m(" Relay ",-1)),l("span",{class:h(["status-dot",{connected:c(_),disconnected:!c(_),"data-active":c(g)}])},null,2)]))]),n(B,{"default-active":E.value,collapse:a.value,"collapse-transition":!1,router:"",class:"aside-menu"},{default:e(()=>[(s(),u(Y,null,Q(A,d=>n(V,{key:d.path,index:d.path},{title:e(()=>[m(C(d.label),1)]),default:e(()=>[n(p,null,{default:e(()=>[(s(),i(X(d.icon)))]),_:2},1024)]),_:2},1032,["index"])),64))]),_:1},8,["default-active","collapse"]),r.value?(s(),u("div",le,[a.value?(s(),i(D,{key:1,content:r.value.version,placement:"right"},{default:e(()=>[...t[3]||(t[3]=[l("span",{class:"version-dot"},"v",-1)])]),_:1},8,["content"])):(s(),u("span",ce,C(r.value.version),1))])):P("",!0)]),_:1},8,["width"]),n(k,null,{default:e(()=>[n(q,{class:"layout-header"},{default:e(()=>[n(p,{class:"toggle-btn",onClick:t[0]||(t[0]=d=>a.value=!a.value)},{default:e(()=>[a.value?(s(),i(N,{key:1})):(s(),i(M,{key:0}))]),_:1}),l("div",de,[n(W,{onCommand:L},{dropdown:e(()=>[n(T,null,{default:e(()=>[n(I,null,{default:e(()=>[...t[5]||(t[5]=[m("退出登录",-1)])]),_:1})]),_:1})]),default:e(()=>[l("span",ie,[n(p,null,{default:e(()=>[n(S)]),_:1}),t[4]||(t[4]=l("span",{class:"username"},"管理员",-1)),n(p,null,{default:e(()=>[n(U)]),_:1})])]),_:1})])]),_:1}),n($,{class:"layout-main"},{default:e(()=>[n(G)]),_:1})]),_:1})]),_:1})}}}),me=oe(ue,[["__scopeId","data-v-f49202a1"]]);export{me as default};

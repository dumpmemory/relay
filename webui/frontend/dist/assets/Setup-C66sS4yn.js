import{d as V,r as c,o as x,c as u,a as k,b as n,e as s,w as a,f as t,n as C,u as L,g as p,h as z,E as l,s as M,i as j,j as B,_ as P}from"./index-CYqpppIH.js";const S={class:"setup-page"},E={class:"form-section"},N={key:0},A={key:1},I=V({__name:"Setup",setup(K){const g=L(),r=c(!1),v=c(!1),o=c({password:"",confirmPassword:""}),f=async()=>{if(!o.value.password){l.error("请输入密码");return}if(o.value.password!==o.value.confirmPassword){l.error("两次密码输入不一致");return}if(o.value.password.length<6){l.error("密码长度至少 6 位");return}r.value=!0;try{const i=await M.init(o.value.password);if(i.code===0){const e=await j.login(o.value.password);e.code===0&&B(e.data.token),l.success("初始化完成"),g.push("/")}else l.error(i.msg)}finally{r.value=!1}};return x(()=>{setTimeout(()=>{v.value=!0},100)}),(i,e)=>{const m=t("Lock"),_=t("el-icon"),w=t("el-input"),b=t("el-form-item"),h=t("el-button"),y=t("el-form");return p(),u("div",S,[e[4]||(e[4]=k('<div class="bg-decoration" data-v-f791ecb7><div class="circle circle-1" data-v-f791ecb7></div><div class="circle circle-2" data-v-f791ecb7></div><div class="circle circle-3" data-v-f791ecb7></div><div class="grid-pattern" data-v-f791ecb7></div></div>',1)),n("div",{class:C(["setup-card",{"card-visible":v.value}])},[e[2]||(e[2]=k('<div class="logo-section" data-v-f791ecb7><div class="logo-icon" data-v-f791ecb7><svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-f791ecb7><path d="M24 4L4 14V34L24 44L44 34V14L24 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-f791ecb7></path><path d="M4 14L24 24L44 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-f791ecb7></path><path d="M24 24V44" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-f791ecb7></path><circle cx="24" cy="24" r="6" stroke="currentColor" stroke-width="2" data-v-f791ecb7></circle></svg></div><h1 class="title" data-v-f791ecb7>系统初始化</h1><p class="subtitle" data-v-f791ecb7>首次使用，请设置管理员密码</p></div>',1)),n("div",E,[s(y,{model:o.value,"label-position":"top"},{default:a(()=>[s(b,{label:"管理员密码"},{default:a(()=>[s(w,{modelValue:o.value.password,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.password=d),type:"password",placeholder:"请输入密码 (至少 6 位)",size:"large","show-password":""},{prefix:a(()=>[s(_,null,{default:a(()=>[s(m)]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(b,{label:"确认密码"},{default:a(()=>[s(w,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.confirmPassword=d),type:"password",placeholder:"请再次输入密码",size:"large","show-password":"",onKeyup:z(f,["enter"])},{prefix:a(()=>[s(_,null,{default:a(()=>[s(m)]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(h,{type:"primary",size:"large",loading:r.value,onClick:f,class:"submit-btn"},{default:a(()=>[r.value?(p(),u("span",A,"设置中...")):(p(),u("span",N,"完成设置"))]),_:1},8,["loading"])]),_:1},8,["model"])]),e[3]||(e[3]=n("div",{class:"footer-info"},[n("span",null,"Initial Setup Wizard")],-1))],2)])}}}),T=P(I,[["__scopeId","data-v-f791ecb7"]]);export{T as default};
